let pgValue=0;document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("progressbar-selector");pgValue=500,e.value=pgValue},!1);const dataSentences={me1:["mimicking nature"],you1:["inspired by machines"],me2:["materialist fiction"],you2:["phenomenological reality"],me3:["intelligence creating"],you3:["tools shaping"],me4:["organs as a tools"],you4:["tools as an organs"],me5:["integrate"],you5:["synthesize"],me6:["ecosystem"],you6:["algorithm"],me7:["number"],you7:["word"],me8:["digitally reductive"],you8:["inherently complex"],me9:["why"],you9:["what"],me10:["reproducing"],you10:["creating"],me11:["fixed meaning"],you11:["fluid sense"],me12:["making sense"],you12:["understanding meaning"],me13:["organisation"],you13:["chaos"],me14:["being radical"],you14:["avoiding conflicts"],me15:["radical truth"],you15:["conservative interpretations"],me16:["truth in lye"],you16:["lye in truth"],me17:["woe from mind"],you17:["happiness from madness"],me18:["individual perception"],you18:["collective pretending"],me19:["strength in weakness"],you19:["weakness in strength"],me20:["focusing on disposable"],you20:["avoidance of constant"],me21:["dualities dismissed"],you21:["complexities embraced"],me22:["providing an experience"],you22:["producing algorithms"],me23:["music"],you23:["silence"],me24:["touching vibrations"],you24:["touching music"],me25:["complexity of words"],you25:["simplicity of numbers"],me26:["unbearable lightness"],you26:["habitual heaviness"],me27:["simplifying reductions"],you27:["complicating details"],me28:["searching for code"],you28:["discovering magic"],me29:["digital-self"],you29:["digital twin"],me30:["theory of measure"],you30:["the science of error"],me31:["measured errors"],you31:["chaotic accuracies"],me32:["relation to complexity"],you32:["modeling of simplicity"],me33:["magic of complexity"],you33:["power of simplicity"],me34:["intuitive words"],you34:["calculated numbers"],me35:["history of moment"],you35:["definition of story"],me36:["intuitively"],you36:["randomly"],me37:["hacking loops"],you37:["looping hacks"],me38:["cybernetic"],you38:["organgic"],me39:["mechanics"],you39:["ecosystem"],me40:["delayed input"],you40:["immediate output"],me41:["everywhere"],you41:["everything"],me42:["hearing deficits"],you42:["communication breakdowns"],me43:["where"],you43:["when"],me44:["analytical detachment"],you44:["passionate attachment"],me45:["guessing the word"],you45:["knowing the number"],me46:["separation"],you46:["sorting"],me47:["repetition"],you47:["detachment"],me48:["asking permission"],you48:["breaking rules"],me49:["knowing without permission"],you49:["learning by rules"],me50:["hacking loops"],you50:["fixing breaks"],me51:["social context"],you51:["personal circumstances"],me52:["direct speech"],you52:["coded messages"],me53:["understanding superficially"],you53:["probing deeply"],me54:["abstraction in numbers"],you54:["reality in words"],me55:["x x x x x x x"],you55:["7"],me56:["infinite nothing"],you56:["limited everything"],me57:["assume"],you57:["accept"],me58:["avoiding"],you58:["standing"],me59:["words central"],you59:["numbers essential"],me60:["trust words"],you60:["trust numbers"],me61:["conversation with human"],you61:["chatting with machine"],me62:["leaving aside"],you62:["staying away"],me63:["dirty music"],you63:["pure dance"],me64:["reaction"],you64:["reflection"],me65:["health as balance"],you65:["imbalance as reality"]};let move=1,step=2;const currentNote=0,allNotes=[];let progressbarStyle="noteImage",maxTop=300;const stepSize=300,notes=["C2","D2","E2","F2","G2","A2","B2","C3","D3","E3","F3","G3","A3","B3","C4","D4","E4","F4","G4","A4","B4","C5","D5","E5","F5","G5","A5","B5","C6","D6","E6","F6","G6","A6","B6",];function playComposition(){let e=setUpSynth(),t=Tone.now();for(let n=0;n<allNotes.length;n++)e.triggerAttackRelease(allNotes[n],"0.4n",t),t+=.8}function playRandomNote(e){let t=setUpSynth(),n=window.screen.width/notes.length,s=notes[Math.ceil(e/n)];allNotes.push(s),t.triggerAttackRelease(s,"0.4n")}function playNoteOnHover(e){let t=setUpSynth(),n=e.dataset.note;t.triggerAttackRelease(n,"0.5n")}function setUpSynth(){Tone.start();let e=new Tone.PolySynth().toDestination();return e.set({volume:0,detune:0,portamento:0,envelope:{attack:.4,attackCurve:"linear",decay:.5,decayCurve:"exponential",release:.8,releaseCurve:"exponential",sustain:.4},oscillator:{detune:0,frequency:440,partialCount:8,partials:[1.2732395447351628,0,.4244131815783876,0,.25464790894703254,0,.18189136353359467,0,],phase:0,type:"square8"}}),e}function movement(e){onlyNow();let t=makeIt(e,"me"),n=makeIt(e,"you"),s=e.id;console.log("me = "+t),console.log("you = "+n),connect(document.getElementById(s),document.getElementById(t),"#000",1),connect(document.getElementById(s),document.getElementById(n),"#000",1);let o=e.style.left,a=o.substring(0,o.length-2);move<60&&move++,"1"!=s&&(playRandomNote(a),addToProgressBar(s))}function addToProgressBar(e){document.getElementById("progressbar");let t=document.getElementById("progressbar-selector");t.value=pgValue;let n=allNotes[allNotes.length-1],s=document.getElementById(e);text=s.dataset.sentence;let o=document.getElementById("written-text-inner");o.innerHTML+="<span>"+text+"</span>",o.innerHTML+="</br>","noteImage"==progressbarStyle?progressbar.innerHTML+=`<div class="progress-element" data-note="${n}" data-number="${e}" data-sentence="${text}" onmouseover="playNoteOnHover(this);"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="none"><path d="M3 15.808C2.17467 15.808 1.468 15.514 0.88 14.926C0.293333 14.3394 0 13.6334 0 12.808C0 11.9827 0.293333 11.2764 0.88 10.689C1.46667 10.1017 2.17333 9.80802 3 9.80802C3.38333 9.80802 3.747 9.87602 4.091 10.012C4.435 10.1487 4.738 10.3537 5 10.627V0.192017H9.884V2.73102H6V12.808C6 13.6327 5.706 14.3387 5.118 14.926C4.53 15.5134 3.824 15.8074 3 15.808Z" fill="black"/></svg></div>`:"note"==progressbarStyle?progressbar.innerHTML+=`<div class="progress-element" data-note="${n}" data-number="${e}" data-sentence="${text}" onmouseover="playNoteOnHover(this);">${n}</div>`:"text"==progressbarStyle?progressbar.innerHTML+=`<div class="progress-element" data-note="${n}" data-number="${e}" data-sentence="${text}" onmouseover="playNoteOnHover(this);"><div style="display: flex;flex-direction: column; width: 9px"><svg width="9.884px" height="15.616px"  xmlns="http://www.w3.org/2000/svg"><rect width="9.884px" height="15.616px"  fill="black" /></svg><label class="label-for-progress" style="transform: translate(-50%); text-wrap: nowrap;">${text}</label></div></div>`:"number"==progressbarStyle&&(progressbar.innerHTML+=`<div class="progress-element" data-note="${n}" data-number="${e}" data-sentence="${text}" onmouseover="playNoteOnHover(this);">${e}</div>`)}function onlyNow(){let e=document.querySelectorAll(".me, .you, .w");for(let t of e)t.hasAttribute("onclick")&&(t.removeAttribute("onclick"),t.disabled=!0),t.classList.contains("now")&&t.classList.remove("now")}const styles=["text"];function switchStyles(e,t){let n=document.getElementsByClassName("singing-button");if(e.classList.contains("active")){if(1!=styles.length){e.classList.remove("active");let s=styles.indexOf(t);styles.splice(s,1)}}else e.classList.add("active"),styles.push(t);for(var o=0;o<n.length;o++)n[o].innerHTML="";for(let a=0;a<styles.length;a++){if("number"==styles[a])for(var o=0;o<n.length;o++)n[o].innerHTML+=n[o].dataset.numberview;else if("text"==styles[a])for(var o=0;o<n.length;o++)n[o].innerHTML+=n[o].dataset.sentence;else if("noteImage"==styles[a])for(var o=0;o<n.length;o++)n[o].innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="none"><path d="M3 15.808C2.17467 15.808 1.468 15.514 0.88 14.926C0.293333 14.3394 0 13.6334 0 12.808C0 11.9827 0.293333 11.2764 0.88 10.689C1.46667 10.1017 2.17333 9.80802 3 9.80802C3.38333 9.80802 3.747 9.87602 4.091 10.012C4.435 10.1487 4.738 10.3537 5 10.627V0.192017H9.884V2.73102H6V12.808C6 13.6327 5.706 14.3387 5.118 14.926C4.53 15.5134 3.824 15.8074 3 15.808Z" fill="black"/></svg>';else for(var o=0;o<n.length;o++)n[o].innerHTML+=n[o].dataset.note;for(var o=0;o<n.length;o++)n[o].innerHTML+="\n"}}function reset(){location.reload()}function showPiano(){let e=document.getElementById("piano-wrapper"),t=document.getElementById("showPianobtn");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}function read(){let e=document.getElementById("written-text-wrapper"),t=document.getElementById("readbtn");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}function showInfo(){let e=document.getElementById("info"),t=document.getElementById("aboutbtn");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}function changeProgressbar(e){"0"==e?setProgressbar("number"):"250"==e?setProgressbar("text"):"500"==e?setProgressbar("noteImage"):setProgressbar("note"),pgValue=e}function save(){saveSiteScreenshot();let e=new Tone.Recorder,t=new Tone.PolySynth().toDestination().connect(e);t.set({volume:0,detune:0,portamento:0,envelope:{attack:.4,attackCurve:"linear",decay:.5,decayCurve:"exponential",release:.8,releaseCurve:"exponential",sustain:.4},oscillator:{detune:0,frequency:440,partialCount:8,partials:[1.2732395447351628,0,.4244131815783876,0,.25464790894703254,0,.18189136353359467,0,],phase:0,type:"square8"}});let n=Tone.now();e.start();for(let s=0;s<allNotes.length;s++)t.triggerAttackRelease(allNotes[s],"0.4n",n),n+=.8;setTimeout(async()=>{let t=await e.stop(),n=URL.createObjectURL(t),s=document.createElement("a");s.download="recording.mp3",s.href=n,s.click()},.8*allNotes.length*1e3)}function saveSiteScreenshot(){html2canvas(document.getElementById("main-tree"),{scrollY:-window.scrollY,useCORS:!0}).then(e=>{let t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="website-screenshot.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})}function setProgressbar(e){let t=document.getElementsByClassName("progress-element");if("note"==e){for(let n=0;n<t.length;n++)t[n].innerHTML=t[n].dataset.note;progressbarStyle="note"}else if("number"==e){for(let s=0;s<t.length;s++)t[s].innerHTML=t[s].dataset.number;progressbarStyle="number"}else if("noteImage"==e){for(let o=0;o<t.length;o++)t[o].innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="none"><path d="M3 15.808C2.17467 15.808 1.468 15.514 0.88 14.926C0.293333 14.3394 0 13.6334 0 12.808C0 11.9827 0.293333 11.2764 0.88 10.689C1.46667 10.1017 2.17333 9.80802 3 9.80802C3.38333 9.80802 3.747 9.87602 4.091 10.012C4.435 10.1487 4.738 10.3537 5 10.627V0.192017H9.884V2.73102H6V12.808C6 13.6327 5.706 14.3387 5.118 14.926C4.53 15.5134 3.824 15.8074 3 15.808Z" fill="black"/></svg>';progressbarStyle="noteImage"}else if("text"==e){for(let a=0;a<t.length;a++)t[a].innerHTML=`<div style="display: flex;flex-direction: column; width: 9px"><svg width="9.884px" height="15.616px"  xmlns="http://www.w3.org/2000/svg"><rect width="9.884px" height="15.616px"  fill="black" /></svg><label class="label-for-progress" style="transform: translate(-50%); text-wrap: nowrap;">${t[a].dataset.sentence}</label></div>`;progressbarStyle="text"}}function makeIt(e,t){let n=e.offsetTop;e.offsetLeft;let s=document.getElementById("main-tree"),o=document.createElement("button"),a=s.appendChild(o),i=step;a.setAttribute("id",i),a.setAttribute("onclick","movement(this)"),a.classList.add(t),a.classList.add("now"),a.classList.add("singing-button"),a.dataset.numberview=i;let r=t+move,l=dataSentences[r];a.dataset.sentence=l;let $=getRandomNumber(maxTop+10,maxTop+300);a.style.top=`${$}px`;let c=getRandomNumber(50,innerWidth-150);a.style.left=`${c}px`;let m=window.screen.width/notes.length,_=notes[Math.ceil(c/m)];a.dataset.note=_,s.appendChild(a),maxTop=Math.max($,n),s.style.height=`${maxTop+450}px`,step++;for(let g=0;g<styles.length;g++)"number"==styles[g]?a.innerHTML+=a.dataset.numberview:"text"==styles[g]?a.innerHTML+=a.dataset.sentence:"noteImage"==styles[g]?a.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="none"><path d="M3 15.808C2.17467 15.808 1.468 15.514 0.88 14.926C0.293333 14.3394 0 13.6334 0 12.808C0 11.9827 0.293333 11.2764 0.88 10.689C1.46667 10.1017 2.17333 9.80802 3 9.80802C3.38333 9.80802 3.747 9.87602 4.091 10.012C4.435 10.1487 4.738 10.3537 5 10.627V0.192017H9.884V2.73102H6V12.808C6 13.6327 5.706 14.3387 5.118 14.926C4.53 15.5134 3.824 15.8074 3 15.808Z" fill="black"/></svg>':a.innerHTML+=a.dataset.note,a.innerHTML+="\n";return i}function getRandomNumber(e,t){return Math.floor(Math.random()*(t-e))+e}function connect(e,t,n,s){console.log(e),console.log(t);let o=getOffset(e),a=getOffset(t),i=o.left,r=o.top+o.height,l=a.left,$=a.top,c=Math.sqrt((l-i)*(l-i)+($-r)*($-r)),m=Math.atan2(r-$,i-l)*(180/Math.PI),_=`<div style='opacity: 1; padding:0px; margin:0px; height:${s}px; background-color:${n}; line-height:1px; position:absolute; left:${(i+l)/2-c/2}px; top:${(r+$)/2-s/2}px; width:${c}px; -moz-transform:rotate(${m}deg); -webkit-transform:rotate(${m}deg); -o-transform:rotate(${m}deg); -ms-transform:rotate(${m}deg); transform:rotate(${m}deg);' />`;document.getElementById("main-tree").innerHTML+=_}function getOffset(e){let t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}}document.addEventListener("click",function(e){let t=document.getElementById("written-text-wrapper"),n=document.getElementById("readbtn");t.contains(e.target)||e.target===n||t.classList.remove("active")});